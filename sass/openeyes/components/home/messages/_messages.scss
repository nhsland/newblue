// ** Copyright (C) 2018, OpenEyes Foundation. This file is part of OpenEyes. 
// ** OpenEyes is free software; and is distributed, WITHOUT ANY WARRANTY under the terms of AGPL 3.0 licence.
//

// Home - Messages
// Table data lists Patient (No, Gender, Age, Name)
// then message: data, who, message, actions.
// at lowest supported resolutiion a very long name can push 
// table into horizontal scrolling

.home-messages {
	
	// wrapper for <table> .messages
	.messages-all {
		padding:10px 10px 20px 0;
	}
	
	// <table>
	// extends 'standard' table and uses highlight-rows
	.messages {
		width: 100%; 
		
		// set last <td> to the right	
		th, td {
			// default (message read)
			color:$oe-text-light;
			padding:10px 6px;  			// increase padding
			@include font-size(12);		// reduce font-size
			line-height:1.4;			// improve legabilty
			
			&:last-child {
				text-align: right;
				padding-right:0;
			}
		}	
		
		tbody {
			tr {
				// unread messages
				&.unread {
					td {
						color:$oe-text;
						
						// at lowest resolution change style
						// smaller font (to fit longer names) and bold
						@include font-size(12);
						font-weight:$oe-font-bold;
						
						// after extended browser 
						// change back to original design style
						@include media($oe-extended-browser-size){
							@include font-size(14);
							font-weight:$oe-font-medium;
						}
						
						
					}
				}
			}
			
			// <td>
			td {
				// create a vertical divider between 
				// patient data and message data
				&.patient {
					border-right:2px solid $oe-line;
					padding-right:12px
				}
				
				.urgent-message {
					fill:rgb(202,121,50); // must work across themes
					margin:0 3px 0 0;
				}
				.reply-message {
					fill:$oe-text-active;
				}
			}
		}
			

		// handle the actual messages
		// within the <td>
		// DOM: <div class="message">Message</div> 
		// strucutre to make use of truncated text
		.message {
			// push out the containing <td>
			// using vw:
			width:17vw; // tested this with a long patient and long user name  
			
			// when we have a bit more space bump it up:
			@include media($oe-extended-browser-size){
				width:21vw;
			}
			
			height:1.2rem;
			overflow: hidden;
			color: inherit;
			
			// truncate text
			white-space: nowrap;
			text-overflow: ellipsis;
			
			// expand and read full message (if truncated)		
			&.expand {
				height: auto;
				text-overflow: none;
				white-space: normal;
				color: $oe-text;
			}
			
		}
	}
}

