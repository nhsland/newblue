var idg=idg||{};idg.init=function(){new idg.NavBtnPopup("logo",$("#js-openeyes-btn"),$("#js-openeyes-info")),new idg.NavBtnPopup("shortcuts",$("#js-nav-shortcuts-btn"),$("#js-nav-shortcuts-subnav")).useWrapper($("#js-nav-shortcuts"));var t=new idg.NavBtnPopup("hotlist",$("#js-nav-hotlist-btn"),$("#js-hotlist-panel"));idg.hotList(t),$(".hidden").removeClass("hidden").hide(),idg.patientPopups.init(),idg.collapseGroups(),idg.tooltips(),idg.overlayPopup(".js-demo-open-eyedraw-app","eyedraw-edit-app.php","#js-demo-eyedraw-app-close"),idg.overlayPopup(".js-demo-open-eyedraw-app-v2","eyedraw-edit-app-v2.php","#js-demo-eyedraw-app-close"),idg.overlayPopup(".js-demo-open-cataract","ed-opnote-cataract.php","#js-demo-eyedraw-app-close"),idg.overlayPopup("#js-change-context-btn","change-context.php",".close-icon-btn"),idg.overlayPopup("#copy-edit-history-btn","previous-history-elements.php",".close-icon-btn"),idg.overlayPopup("#copy-edit-anterior-segment-btn","previous-ed-anterior.php",".close-icon-btn"),idg.overlayPopup("#js-virtual-clinic-btn","virtual-clinic.php",".close-icon-btn"),idg.overlayPopup("#js-delete-event-btn","delete-event.php",".cancel-icon-btn"),idg.overlayPopup("#js-add-new-event","add-new-event.php",".close-icon-btn",function(t){t.find(".step-3").click(function(){window.location=$(this).data("url")})});idg.examElementSearchPopup(),idg.expandElementList(),idg.sidebarQuickInfo(),idg.tileDataOverflow(),idg.collapseTiles(),idg.comments(),idg.elementAddSelectSearch(),idg.toggleRadio(),oes.oescapeExit(),idg.homeMessageExpand(),idg.auditTrail(),idg.vcDraggable()};var clinic=clinic||{};clinic.init=function(t){this.data=t,this.activePathwayID=0,this.activePathwayName="",$(".js-add-pathway").click(function(t){t.stopPropagation(),clinic.activePathwayID=$(this).data("id"),clinic.activePathwayName=$(this).data("name");var e=clinic.getPosition($(this));clinic.addPathway.show(e.left,e.top-15)}),$(".oe-clinic-list .pathway-step").each(function(){clinic.makeDefaultStep($(this));var t=$(this).attr("class").split(" ");void 0==$(this).data("data")?$(this).data("data",clinic.createDefaultData(t[1])):$(this).data("data").state=clinic.setState(t[1])}),$(".oe-clinic-filter").click(function(t){t.stopPropagation(),clinic.filterList($(this))}),this.setupDemoUI(),this.setupAddToAll(),this.setupAddPathway(),this.setupActiveInfo(),this.setupAssignments(),this.setupFilters(),this.setDurationGraphics(),this.showCurrentTime(),this.quicklook()},clinic.setupActiveInfo=function(){$("#js-active-step-info .close-icon-btn").click(function(t){t.stopPropagation(),clinic.activeInfo.hide()}),$("#js-activate-task").click(function(t){clinic.activeInfo.activate()}),$("#js-submit-pin-right").click(function(t){clinic.activeInfo.pin($("#js-user-pin-right").val(),"right")}),$("#js-submit-pin-left").click(function(t){clinic.activeInfo.pin($("#js-user-pin-left").val(),"left")}),$("#js-trash-active-step").click(function(t){clinic.activeInfo.removeStep()}),clinic.activeInfo={activeStep:null,removeStep:function(){this.activeStep.remove(),this.hide()},activate:function(){clinic.makeStepActive(this.activeStep),this.hide()},pin:function(t,e){"1234"===t?(clinic.stepComplete(this.activeStep),this.hide()):($(".eye-confirmation."+e).addClass("wrong-pin"),$("#js-user-pin-"+e).focus())},show:function(t,e,i){clinic.addPathway.hide(),$(".eye-confirmation").removeClass("wrong-pin"),this.activeStep=i;var a=i.data("data");$("#js-active-step-info .title").text(a.n),$("#js-active-step-info .eye .side").text(a.eye),$("#js-active-step-info .data").html(a.t),$("#js-active-step-info").removeClass("hidden").show().css({left:t,top:e}),$("#js-activate-task").hide(),$("#js-pin-confirmation").hide(),$("#js-who-completed").hide(),$("#js-trash-active-step").show();switch(a.state){case"ready":$("#js-activate-task").show();break;case"active":$("#js-pin-confirmation").show(),function(t){switch(t=t.toLowerCase()){case"right":$("#js-pin-confirmation .eye-confirmation.left").hide(),$("#js-pin-confirmation .eye-confirmation.right").show();break;case"left":$("#js-pin-confirmation .eye-confirmation.left").show(),$("#js-pin-confirmation .eye-confirmation.right").hide();break;default:$("#js-pin-confirmation .eye-confirmation.left").show(),$("#js-pin-confirmation .eye-confirmation.right").show()}}(a.eye);break;case"complete":$("#js-who-completed").show(),$("#js-trash-active-step").hide()}},hide:function(){this.activeStep=null,$(".input-confirmation").removeClass("wrong-pin"),$("#js-active-step-info").hide()}}},clinic.setupAddPathway=function(){$("#js-add-new-pathway .close-icon-btn").click(function(t){t.stopPropagation(),clinic.addPathway.hide()}),$("#js-add-new-pathway .next-step-add").click(function(t){t.stopPropagation(),clinic.addPathway.addStep($(this))}),$("#js-dilate-add-btn").click(function(e){e.stopPropagation(),function(){var e=clinic.addPathway.selectedStep,i={},a=!!clinic.addPathway.makeActive||clinic.isNewStepActive(),n=$("input[name=eye]:checked").val();i.eye=n;var s=$("input[name=fixed]:checked").val();if(void 0!==s){i.n="Fixed Dilate Set",i.t=s;e.clone();t(clinic.createNewStep(e,i,a)),t(clinic.createNewStep(e,i,a)),t(clinic.createNewStep(e,i,a)),clinic.addPathway.reset()}else{var c=$(".option-list input:checkbox:checked");if(c.length){i.n="Dilate",i.t="";for(var o=0;o<c.length;o++)i.t+=c[o].value+"<br>";t(clinic.createNewStep(e,i,a)),clinic.addPathway.reset()}}}()}),$("#js-pathway-back").click(function(t){t.preventDefault(),t.stopPropagation(),clinic.addPathway.back()}),$("#js-pathway-back").hide();function t(t){$("#patient-"+clinic.activePathwayID+" .pathway").append(t),clinic.updateTasks()}clinic.addPathway={selectedStep:null,makeActive:!1,show:function(t,e){clinic.activeInfo.hide(),$("#js-add-new-pathway").removeClass("hidden").show().css({left:t,top:e}),$("#js-add-new-pathway .title").text(clinic.activePathwayName)},addStep:function(e){if(this.makeActive=1==$(".make-active input:checkbox:checked").length,$(".make-active input").prop("checked",!1),"dilate"==e.data("id"))this.selectedStep=e,this.showDilateOptions();else{var i=!!this.makeActive||clinic.isNewStepActive(),a=clinic.createDefaultData("next-step");t(clinic.createNewStep(e,a,i)),this.selectedStep=null}},showDilateOptions:function(){$("#js-add-new-pathway .oec-new-pathway-steps").hide(),$("#add-dilate-options").removeClass("hidden").show(),$("#js-pathway-events-title span").hide(),$("#js-pathway-back").show()},back:function(){$("#js-add-new-pathway .oec-new-pathway-steps").show(),$("#add-dilate-options").hide(),$("#js-pathway-events-title span").show(),$("#js-pathway-back").hide()},reset:function(){$("#add-dilate-options .option-list input").prop("checked",!1),$("#add-dilate-options").hide(),$("#js-add-new-pathway .oec-new-pathway-steps").show(),$("#js-pathway-events-title span").show(),$("#js-pathway-back").hide()},hide:function(){this.reset(),$("#js-add-new-pathway").hide()}}},clinic.setupAddToAll=function(){$("#js-add-to-all-pathways .close-icon-btn").click(function(t){t.stopPropagation(),clinic.addToAll.hide()}),$("#js-add-to-all").on("click",function(t){t.stopPropagation(),clinic.addToAll.show()}),$("#js-add-all-set-btn").click(function(i){i.stopPropagation(),function(){var i=$("#js-add-to-all-pathways input[name=userset]:checked").val();if(void 0!==i&&1==i){var a=clinic.createPathwayStep("VA");clinic.makeDefaultStep(a),a.data("data",{eye:"left",n:"Visual Acuity",t:"In progress",state:"ready"});var n=clinic.createPathwayStep("Dilate");clinic.makeDefaultStep(n),n.data("data",{eye:"left",n:"Dilate",t:"Tropicamide",state:"ready"});var s=a.add(n);t(e,s)}}()}),$("#js-add-to-all-pathways .next-step-add").click(function(i){i.stopPropagation(),a=$(this),t(e,clinic.createNewStep(a,clinic.createDefaultData("next-step")));var a}),$("#js-add-to-all-pathways .select-deselect-all input").change(function(){$(".js-add-all-select").prop("checked",this.checked)});function t(t,e){$(".oe-clinic-list tbody tr").each(function(){var i=$(this).data("state");"active"!=i&&"inactive"!=i||t(this,e)})}function e(t,e){var i=$(".js-add-all-select",t).is(":checked"),a=$(t).is(":hidden");if(i&&!a){var n=$(".pathway-step",t).last().hasClass("green"),s=e.clone(!0);if(n){var c=s.first();clinic.makeDefaultStep(c),clinic.makeStepActive(c)}$(".pathway",t).append(s),clinic.updateTasks()}}function i(t){$(".js-add-pathway",t).hide(),$(".js-add-all-select",t).removeClass("hidden").prop("checked",!0).show()}function a(t){$(".js-add-pathway",t).show(),$(".js-add-all-select",t).hide()}clinic.addToAll={show:function(){clinic.addPathway.hide(),$("#js-add-to-all-pathways").removeClass("hidden").show(),$("#js-add-to-all-pathways .select-deselect-all input:checkbox").prop("checked",!0),t(i)},hide:function(){t(a),$("#js-add-to-all-pathways").hide()}}},clinic.changeAssignment=function(t,e,i){i=parseInt(i);var a=clinic.data[t].indexOf(i);a>-1&&clinic.data[t].splice(a,1),clinic.data[e].push(i),n(t),n(e);function n(t){$("#filter-"+t+" .current").text(clinic.data[t].length)}},clinic.createDefaultData=function(t){return{eye:"Both",n:"Not Set",t:"Currently no data is being generated for this step",state:clinic.setState(t)}},clinic.createNewStep=function(t,e,i){void 0===i&&(i=!1);var a=$.extend({},e),n=t.clone();return n.removeClass("next-step-add"),clinic.makeDefaultStep(n),n.data("data",a),i&&clinic.makeStepActive(n),n},clinic.createPathwayStep=function(t){var e=$("<span>",{class:"pathway-step"});return e.text(t),e.append('<span class="time"></span>'),e},clinic.filterList=function(t){var e=t.data("id");if($(".oe-clinic-filter").removeClass("selected"),$("#filter-"+e).addClass("selected"),"all"==e)$(".oe-clinic-list tbody tr").show();else{$(".oe-clinic-list tbody tr").hide();for(var i=clinic.data[e],a=0;a<i.length;a++)$("#patient-"+i[a]).show()}},clinic.getPosition=function(t){var e=t.position(),i=$(".oe-clinic-list").position();return e.top=e.top-i.top,e},clinic.isNewStepActive=function(){return!!$("#patient-"+clinic.activePathwayID+" .pathway-step").last().hasClass("green")},clinic.makeDefaultStep=function(t){t.addClass("next-step"),t.click(function(t){t.stopPropagation();var e=clinic.getPosition($(this));clinic.activeInfo.show(e.left,e.top,$(this))})},clinic.makeStepActive=function(t){t.data("data").state="active",t.removeClass("next-step").addClass("orange"),clinic.updateTasks()},clinic.makeStepComplete=function(t){t.data("data").state="complete",t.removeClass("orange").addClass("green"),t.children(".time").text("10:35"),clinic.updateTasks()},clinic.quicklook=function(){var t=$("#patient-clinic-quicklook");$(".js-clinic-quicklook").click(function(e){e.stopPropagation();var i=clinic.getPosition($(this));!function(e,i){offsetTop=i+30,t.find(".patient-details .name").text(e.data("name")),t.find(".patient-details .number").text(e.data("id")),e.find(".triangle").length?t.find(".alert-box").show():t.find(".alert-box").hide();t.removeClass("hidden").css({top:offsetTop}).show()}($(this),i.top)}),t.click(function(e){e.stopPropagation(),t.hide()})},clinic.setDurationGraphics=function(){$(".duration-mins").each(function(){var t=parseInt($(this).text());if(t>0){var e=$(this).parent().children(".duration-graphic");t>90?e.children(".c4").css({fill:"#f00"}):t>60?e.children(".c3").css({fill:"#f60"}):t>40?e.children(".c2").css({fill:"#ebcd00"}):e.children(".c1").css({fill:"#0c0"})}})},clinic.setState=function(t){var e;switch(t){case"next-step":e="ready";break;case"orange":e="active";break;case"green":case"blue":e="complete";break;case"dna":e="dna"}return e},clinic.setupAssignments=function(){$(".clinic-assign-options").each(function(){var t=$(this).val();$(this).data("previous",t)}),$(".clinic-assign-options").change(function(){var t=$(this).data("id");clinic.changeAssignment($(this).data("previous"),this.value,t),$(this).data("previous",this.value)})},clinic.setupDemoUI=function(){$(".pathway").each(function(){if($(this).children(".pathway-step").first().hasClass("dna")){var t=$(this).parents("tr");t.data("state","dna"),t.find(".clinic-assign-options").hide(),t.find(".js-add-pathway").hide(),t.find(".duration-graphic").css("opacity","0.3"),t.find(".duration-mins").hide()}});(i=$("#patient-1152572")).data("state","complete");var t=i.find(".duration-graphic"),e=t.parent();t.hide(),e.addClass("complete"),e.children(".duration-mins").append(" mins"),i.find(".clinic-assign-options").hide(),i.find(".clinic-assign-options").parent().text("Dr Amit Baum (AB)"),i.find(".js-add-pathway").hide(),$("#filter-AB .total").text(1);(i=$("#patient-1008002")).find(".js-clinic-quicklook").append('<i class="oe-i triangle active small-icon">');var i;(i=$("#patient-1897143")).find(".js-clinic-quicklook").append('<i class="oe-i triangle active small-icon">')},clinic.setupFilters=function(){$("#filter-all").addClass("selected");for(obj in clinic.data){var t=clinic.data[obj],e=obj.toString();if($("#filter-"+e+" .current").text(t.length),"dna"!=obj&&"tasks"!=obj)for(var i=0;i<t.length;i++)$("#patient-"+t[i]+" .clinic-assign-options").val(e)}$(".clinic-assign-options").each(function(){if("unassigned"==$(this).val()&&$(this).is(":visible")){var t=$(this).parents("tr").data("id");clinic.data.unassigned.push(parseInt(t))}}),$("#filter-unassigned .current").text(clinic.data.unassigned.length)},clinic.showCurrentTime=function(){var t=!1;$(".oe-clinic-list tbody tr").each(function(){var e=$(this).find("td").first();if("10:35"==e.text()){t=!0;var i=clinic.getPosition(e);$(".clinic-time").css({top:i.top-7})}t&&$(this).addClass("future")})},clinic.stepComplete=function(t){clinic.makeStepComplete(t);var e=t.next();e.length&&e.hasClass("next-step")&&clinic.makeStepActive(e)},clinic.updateTasks=function(){$("#js-clinic-list-patients tr").each(function(){if("active"==$(this).data("state")){var t=parseInt($(this).data("id")),e=clinic.data.tasks.indexOf(t);$(".pathway-step.orange",this).length?-1==e&&clinic.data.tasks.push(t):e>-1&&clinic.data.tasks.splice(e,1)}}),$("#filter-tasks .current").text(clinic.data.tasks.length)},idg.homeMessageExpand=function(){0!=$(".home-messages").length&&$(".js-expand-message").each(function(){var t=$(this).parent().parent().find(".message");new function(t,e){var i=!1;t.click(function(){t.toggleClass("expand collapse"),i?e.removeClass("expand"):e.addClass("expand");i=!i})}($(this),t)})};var oes={init:function(){$("#js-exit-oescape").click(function(){window.location=localStorage.getItem("lastPage")})},oescapeExit:function(){var t=window.location.href;0==t.includes("oescape")&&localStorage.setItem("lastPage",t)}};oes.initStack=function(t,e,i){var a=1,n=(t=$(t)).children().length;$(t).bind("mousemove touchmove",function(t){t.stopPropagation();var e=$(this).offset(),a=t.pageX-e.left,c=$(this).width(),o=Math.ceil(a/(c/n));0===o||o>n||(s(o),"function"==typeof i&&i(o))});function s(t){$(e+a).hide(),$(e+t).removeClass("hidden").show(),a=t}return{setImg:function(t){s(t),t=t}}},oes.setupAreaTabButtons=function(t,e){for(var i=0;i<t.length;i++)new a(t[i].btn=$(t[i].btn),t[i].content=$(t[i].content),i);t[0].btn.addClass("selected");function a(i,a,n){a=a,n=n;(i=i).click(function(i){i.stopPropagation(),function(){for(var e=0;e<t.length;e++)t[e].btn.removeClass("selected"),t[e].content.hide()}(),$(this).addClass("selected"),a.removeClass("hidden").show(),"function"==typeof e&&e(n)})}},oes.setupResizeButtons=function(t){var e,i=$(".oes-left-side"),a=$(".oes-right-side");$(".js-oes-area-resize").click(function(n){n.stopPropagation();switch($(this).data("area")){case"small":e=500;break;case"medium":e=700;break;case"large":e=900;break;case"full":e=null}null==e?(i.css({"min-width":"500px",width:"100%"}),a.hide()):(i.css({"min-width":e+"px",width:""}),a.show()),"function"==typeof t&&t(e)})},idg.lightningViewer=function(){"/v3.0/lightning-letter-viewer"!=window.location.pathname?$("#js-lightning-viewer-btn").click(function(t){t.stopPropagation(),window.location="/v3.0/lightning-letter-viewer"}).mouseenter(function(){$(this).addClass("active")}).mouseleave(function(){$(this).removeClass("active")}):$("#js-lightning-viewer-btn").addClass("active")},idg.patientPopups={init:function(){if(0!=$("#oe-patient-details").length){var t=[new idg.PatientBtnPopup("quicklook",$("#js-quicklook-btn"),$("#patient-summary-quicklook")),new idg.PatientBtnPopup("demographics",$("#js-demographics-btn"),$("#patient-popup-demographics")),new idg.PatientBtnPopup("management",$("#js-management-btn"),$("#patient-popup-management")),new idg.PatientBtnPopup("risks",$("#js-allergies-risks-btn"),$("#patient-popup-allergies-risks"))];for(pBtns in t)t[pBtns].inGroup(this);this.popupBtns=t,$("#problems-plans-sortable").length&&idg.problemsPlans()}},closeAll:function(){for(pBtns in this.popupBtns)this.popupBtns[pBtns].hide()}},idg.problemsPlans=function(){var t=document.getElementById("problems-plans-sortable");Sortable.create(t);$("#js-add-pp-btn").click(function(){var t=$("#create-problem-plan"),e=t.val();if(""!==e){var i='<li><span class="drag-handle">&#9776;</span>'+e+'<div class="remove">&times;</div></li>';$("#problems-plans-sortable").append(i),t.val("")}}),$("#problems-plans-sortable .remove").click(function(){$(this).parent().remove()})},idg.auditTrail=function(){if(0!=$("#js-event-audit-trail-btn").length){$("#js-event-audit-trail-btn").click(function(){$("#js-event-audit-trail").toggle(),$(this).toggleClass("active")})}},idg.elementAddSelectSearch=function(){var t=[];$(".js-add-select-search").each(function(){var e=new function(e,i){var a=i.find(".search-options"),n=i.find(".select-options"),s=i.find(".close-icon-btn"),c=i.find(".select-icon-btn"),o=i.find(".search-icon-btn"),l=i.find(".add-icon-btn"),d=i.find(".js-search-autocomplete"),p=!0;switch(i.prop("id")){case"add-to-history":case"add-to-risks":case"add-to-follow-up":p=!1}var r=[];this.closePopup=h,s.click(function(t){t.stopPropagation(),h()}),c.click(function(t){t.stopPropagation(),f(),o.length&&v()}),l.length&&l.click(function(t){t.stopPropagation(),u()});o.length&&o.click(function(t){t.stopPropagation(),function(){n.hide(),a.show(),d.focus();var t=$(".js-search-results").hide();d.keypress(function(){"au"===d.val()&&t.show()})}(),v()});$(".add-options",i).each(function(){$(this).data("multi");r.push(new function(t,e,i){var e=e,a=null,n=[];(i=i)&&l.hide();e?$("li",t).click(function(t){t.stopPropagation(),$(this).toggleClass("selected"),$(this).hasClass("selected")?s($(this).data("str")):c($(this).data("str"))}):$("li",t).click(function(t){t.stopPropagation(),function(t){null!=a&&(a.removeClass("selected"),c(a.data("str")));t.addClass("selected"),s(t.data("str")),a=t}($(this)),i&&u()});function s(t){n.push(t)}function c(t){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}this.getData=function(t){return n.join(t)},this.clearData=function(){n=[]}}($(this),$(this).data("multi"),$(this).data("clickadd")))});e.click(function(a){a.stopPropagation(),function(){for(var e=0;e<t.length;e++)t[e].closePopup()}(),f(),function(t){var e=t[0].getBoundingClientRect(),a=document.documentElement.clientWidth,n=document.documentElement.clientHeight;i.css({bottom:n-e.bottom,right:a-e.right});var s=$(".main-event").scrollTop();$(".main-event").on("scroll",function(){s!=$(this).scrollTop()&&($(".main-event").off("scroll"),h())})}(e),i.show(),c.children(".oe-i").addClass("selected"),o.children(".oe-i").removeClass("selected")});function h(){if(a.hide(),d.val(""),i.hide(),p){i.find(".add-options li").removeClass("selected");for(var t=0;t<r.length;t++)r[t].clearData()}}function u(){if("add-to-refraction"==i.prop("id")){var t="",e="",a="";type="";for(var n=0;n<r.length;n++){var s=r[n].getData("");switch(n){case 0:case 1:case 2:t+=s;break;case 3:case 4:case 5:e+=s;break;case 6:a=s;break;case 7:type=s}}$("#js-refraction-input-sphere").val(t),$("#js-refraction-input-cylinder").val(e),$("#js-refraction-input-axis").val(a),$("#js-refraction-input-type").val(type)}"add-to-pupils-left"==i.prop("id")&&$("#js-pupil-left-text").text(r[0].getData("")),"add-to-pupils-right"==i.prop("id")&&$("#js-pupil-right-text").text(r[0].getData("")),"add-to-analytics-service"==i.prop("id")&&$("#js-service-selected").text(r[0].getData("")),"add-to-history"==i.prop("id")&&c("history"),"add-to-risks"==i.prop("id")&&c("risks"),"add-to-follow-up"==i.prop("id")&&c("follow-up");function c(t){for(var t="#js-"+t+"-input-demo",e=[],i=0;i<r.length;i++){var a=r[i].getData(", ");""!=a&&e.push(a)}$(t).val(e.join(", ")),autosize.update($(t))}if("add-to-procedures"==i.prop("id"))for(var o=$("#js-procedures-template"),l=r[0].getData(","),d=l.split(","),n=0;n<d.length;n++){var p=o.clone();p.removeAttr("style id"),p.find(".js-procedure-name").text(d[n]),$("#js-show-procedures").append(p),"Phacoemulsification and IOL"==d[n]&&($(".edit-phaco--iol-right").show(),$(".edit-pcr-risk-right").show(),p.find(".js-add-comments").hide())}h()}function f(){n.show(),a.hide(),d.val("")}function v(){c.children(".oe-i").toggleClass("selected"),o.children(".oe-i").toggleClass("selected")}}($(this),$(this).parent().children(".oe-add-select-search"));t.push(e)})},idg.examElementSearchPopup=function(){null!==document.getElementById("js-search-in-event-popup")&&$("#js-search-in-event").click(function(){$("#js-search-in-event-popup").show(),$(".close-icon-btn").click(function(){$("#js-search-in-event-popup").hide(),$("#js-search-in-event").removeClass("selected"),$("#js-search-event-input-right").val(""),$("#js-search-event-results").hide()}),$("#js-search-event-input-right").keyup(function(){var t=$(this).val().toLowerCase();"alph"==t||"alpha"==$(this).val()?$("#js-search-event-results").show():$("#js-search-event-results").hide()}),$(this).addClass("selected")})},idg.expandElementList=function(){0!=$(".element-data").length&&$(".js-listview-expand-btn").each(function(){var t=$(this).data("list");new function(t,e,i){var a=!0;t.click(function(){$(this).toggleClass("collapse expand"),(a=!a)?(e.show(),i.hide()):(e.hide(),i.show())})}($(this),$("#js-listview-"+t+"-pro"),$("#js-listview-"+t+"-full"))})},idg.sidebarElements=function(){},idg.sidebarQuickInfo=function(){if(0!=$(".events").length){$(".events .event").each(function(){new function(i,a){i.hover(function(){a.removeClass("hidden").show(),i=$(this).data("id"),n=$(this).data("date"),e.stop().fadeIn(50),$("#quickview-"+t).hide(),$("#quickview-"+i).show(),$("#js-quickview-date").text(n),t=i;var i,n},function(){a.hide(),e.stop().fadeOut(150)})}($(".event-type",this),$(".quicklook",this))}),$("[id^=quickview]").hide();var t=null,e=$("#js-event-quickview")}},idg.collapseTiles=function(){$(".js-tiles-collapse-btn").each(function(){var t=$(this).data("group"),e=$("#"+t),i=e.data("collapse");new function(t,e,i){var a=e.children(".tile"),n="expanded"==i;t.click(function(){!function(){if(n){a.find(".element-data").hide(),a.find(".tile-more-data-flag").hide();$('<i class="oe-i expand small pad-right js-data-collapsed-icon"></i>');var e=$('<span class="js-data-hidden-state"> [0]</span>');a.find(".element-title").append(e)}else a.find(".js-data-hidden-state").remove(),a.find(".element-data").show(),a.find(".tile-more-data-flag").show();t.toggleClass("expand collapse"),n=!n}()})}($(this),e,i)})},idg.tileDataOverflow=function(){0!=$(".element.tile").length&&$(".element.tile").each(function(){if($(this).find(".data-value").height()>179){var t=$("<div/>",{class:"tile-more-data-flag"}),e=$("<i/>",{class:"oe-i arrow-down-bold medium selected"});t.append(e),$(this).prepend(t);var i=$(".tile-data-overflow",this);t.click(function(){i.animate({scrollTop:i.height()},1e3)}),i.on("scroll",function(){t.fadeOut()});var a=$(this).find("tbody").get(0).childElementCount,n=$(".element-title",this);n.html(n.text()+" <small>("+a+")</small>")}})},idg.NavBtnPopup=function(t,e,i){var a=e,n=!1,s=!1,c=null,o=!1,l={active:"active",open:"open"};this.hide=r,this.show=p,this.useWrapper=function(t){a.off("click mouseenter mouseleave"),a=t,l.open=l.active,n=!0,d()},this.fixed=function(t){o=t,t?(i.off("mouseenter mouseleave"),p()):r()},this.inGroup=function(t){s=!0,c=t},d();function d(){a.click(function(t){t.stopPropagation(),function(t){if(o)return;t?r():(s&&c.closeAll(),p())}(e.hasClass(l.open))}).mouseenter(function(){e.addClass(l.active),n&&p()}).mouseleave(function(){e.removeClass(l.active),n&&r()})}function p(){e.addClass(l.open),i.show(),n||o||i.mouseenter(function(){$(this).off("mouseenter"),$(this).mouseleave(function(){$(this).off("mouseleave"),r()})})}function r(){e.removeClass(l.open),i.hide()}},idg.PatientBtnPopup=function(t,e,i){var a=!1,n=!1,s=!1,c=!1,o=null,l={active:"active",open:"open"};this.inGroup=function(t){c=!0,o=t},this.hide=function(){p(),n=!1,s=!1},this.show=d,e.click(function(t){t.stopPropagation(),a?s?(n=!0,s=!1):p():d()}).mouseenter(function(){0==n&&(d(),s=!0)}).mouseleave(function(){0==n&&(p(),s=!1)});function d(){c&&o.closeAll(),i.show(),a=!0,e.addClass(l.open)}function p(){i.hide(),a=!1,e.removeClass(l.open)}},idg.collapseGroups=function(){$(".collapse-group").each(function(){new function(t,e,i,a){var n=t,s=e,c=i,o="expanded"==a;0==o&&c.removeClass("hidden").hide();n.click(function(){l()}),s.click(function(){l()});function l(){o?c.hide():c.show(),n.toggleClass("minus plus"),o=!o}}($(this).find(".collapse-group-icon .oe-i"),$(this).find(".collapse-group-header"),$(this).find(".collapse-group-content"),$(this).data("collapse"))})},idg.comments=function(){$(".js-add-comments").click(function(t){t.stopPropagation();var e=$(this),i=$("#"+e.data("input"));e.hide(),i.show(0,function(){var t=$(this).find("textarea"),a=$(this).find(".js-remove-add-comments");t.focus(),a.click(function(){i.hide(),e.show()})})})},idg.hotList=function(t){if(0!=$("#js-nav-hotlist-btn").length){if(1==$("#js-nav-hotlist-btn").data("fixable")){e(),$(window).resize(function(){e()});function e(){$(window).width()>1800?t.fixed(!0):t.fixed(!1)}}$(".oe-hotlist-panel .js-patient-comments").click(function(t){var e=$(this).parent().parent().next(),i=e.find("textarea");e.toggle(),""==i.val()?$(this).hasClass("comments-added")&&($(this).removeClass("comments-added active"),$(this).addClass("comments")):$(this).hasClass("comments")&&($(this).removeClass("comments"),$(this).addClass("comments-added active"))});var i=$("#js-pickmeup-datepicker").hide(),a=pickmeup("#js-pickmeup-datepicker",{format:"a d b Y",flat:!0,position:"left"});document.getElementById("js-pickmeup-datepicker").addEventListener("pickmeup-change",function(t){$("#js-pickmeup-closed-date").text(t.detail.formatted_date),i.hide()}),$("#js-hotlist-closed-select").click(function(){i.show()}),$("#js-hotlist-closed-today").click(function(){a.set_date(new Date),$("#js-pickmeup-closed-date").text("Today")})}},idg.overlayPopup=function(t,e,i,a){return $(t).length&&$(t).click(function(t){t.stopPropagation(),n()}),this.test=n,this;function n(){var t=$("<div>");t.addClass("oe-popup-wrap"),t.load("/php/v3.0/_load/"+e,function(){e=$(i,this),n=$(this),e.click(function(){n.remove()});var e,n;a&&a(t)}),$("body").prepend(t)}},idg.toggleRadio=function(){$(".js-toggle-radio-checked").each(function(){var t=!0;$(this).click(function(){$(this).prop("checked",t),t=!t})})},idg.tooltips=function(){$(".js-has-tooltip").hover(function(){var t=$(this).data("tooltip-content"),e=$(this).offset(),i=e.left-94,a=$("<div></div>",{class:"oe-tooltip",style:"position:fixed; left:"+i+"px; top:0;"});a.text(t),$("body").append(a);var n=$(".oe-tooltip").height(),s=e.top-n-20;$(".oe-tooltip").css({top:s+"px"})},function(){$(".oe-tooltip").remove()})},idg.vcDraggable=function(){var t="oe-vc-floating-input";if(0!=$("#"+t).length){var e,i;document.addEventListener("dragstart",n,!1),document.addEventListener("dragend",s,!1);var a=document.getElementById(t);a.addEventListener("touchstart",n,!1),a.addEventListener("touchend",s,!1)}function n(a){a.dataTransfer.dropEffect="move";var n=$("#"+t).offset();e=a.clientX-n.left,i=a.clientY-n.top}function s(a){var n=a.clientX-e,s=a.clientY-i;s=s<1?1:s,n=n<1?1:n,$("#"+t).css({top:s+"px",left:n+"px"})}};